(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{610:function(t,s,n){"use strict";n.r(s);var a=n(11),e=Object(a.a)({},(function(){var t=this,s=t.$createElement,n=t._self._c||s;return n("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[n("div",{staticClass:"custom-block tip"},[n("p",{staticClass:"title"}),n("p",[t._v("本节文档介绍如何制作 QuickMenu ，通过本节文档，你应当能够掌握 "),n("code",[t._v("textbutton")]),t._v(" 和 "),n("code",[t._v("imagebutton")]),t._v(" 的用法")])]),n("p",[n("strong",[t._v("官方文档")])]),t._v(" "),n("p",[t._v("文本按钮：https://www.renpy.cn/doc/screens.html?highlight=textbutton#textbutton")]),t._v(" "),n("p",[t._v("图片按钮：https://www.renpy.cn/doc/screens.html?highlight=imagebutton#imagebutton")]),t._v(" "),n("h2",{attrs:{id:"需求描述"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#需求描述"}},[t._v("#")]),t._v(" 需求描述")]),t._v(" "),n("p",[t._v("Ren'Py 自带的 QuickMenu 的文本按钮很不好看，点击的反馈感不好，需要替换成图片按钮")]),t._v(" "),n("p",[t._v("所谓 "),n("code",[t._v("QuickMenu")]),t._v(" ，指的是这一部分（图片中青色框出部分）")]),t._v(" "),n("p",[n("img",{attrs:{src:"/Doc/images/renpy/QuickMenu%EF%BC%88%E5%BF%AB%E6%8D%B7%E8%8F%9C%E5%8D%95%EF%BC%89%E7%9A%84%E5%88%B6%E4%BD%9C/%E9%9C%80%E6%B1%82%E6%8F%8F%E8%BF%B0.png",alt:"需求描述"}})]),t._v(" "),n("h2",{attrs:{id:"修改代码"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改代码"}},[t._v("#")]),t._v(" 修改代码")]),t._v(" "),n("h3",{attrs:{id:"默认实现"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#默认实现"}},[t._v("#")]),t._v(" 默认实现")]),t._v(" "),n("p",[t._v("我们首先来看 Ren'Py 的默认实现")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参考 ver1.0 screen.rpy 345-354行")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只截取 textbutton 部分")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 旧 quick_menu 之 textbutton")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"回退"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action Rollback"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"历史"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action ShowMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'history'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"快进"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action Skip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" alternate Skip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fast"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" confirm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"自动"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action Preference"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"auto-forward"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"toggle"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"保存"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action ShowMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"game_save"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"读取"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action ShowMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"game_load"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"快存"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action QuickSave"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"快读"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action QuickLoad"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n            textbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"设置"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action ShowMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'preferences'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br")])]),n("p",[t._v("使用 textbutton 的好处是非常简单，不需要让美工做图标，不过缺点是不好看，所以商业化的 Galgame 基本上都没有用文本做按钮的")]),t._v(" "),n("h3",{attrs:{id:"textbutton-的使用方法"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#textbutton-的使用方法"}},[t._v("#")]),t._v(" textbutton 的使用方法")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# textbutton _("显示的名称") action 点击后要执行的操作')]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v('# _("")前面的“_”表示括号里面的东西可以被翻译，实际做的话不考虑国际化的话可以不加')]),t._v("\ntextbutton _"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"设置"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" action ShowMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v("'preferences'")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# action 可以执行的操作很多，目前在这里我们只要对照中文和后面的英文大概了解即可")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 里面需要关注 ShowMenu('preferences') 这个 action")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ShowMenu('preferences') 中 '' 里面的要跳转的页面的名称，这里具体后面讲写页面的时候再讲")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 现在只需要知道 ShowMenu('preferences') 会跳转到下面的位置（ver1.0 screen.rpy 的1431行）即可")]),t._v("\nscreen preferences"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# preferences 是这个 screen 的名字，上面 ShowMenu 里面填的就是这里的名字")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br")])]),n("h3",{attrs:{id:"修改成图片按钮"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#修改成图片按钮"}},[t._v("#")]),t._v(" 修改成图片按钮")]),t._v(" "),n("p",[t._v("来看代码")]),t._v(" "),n("div",{staticClass:"language-python line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-python"}},[n("code",[n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 参考 ver1.0 screen.rpy 345-354行")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 只截取 imagebutton 部分")]),t._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 这里只截取存档和快进来说明，快进和自动是一类，其余是一类，内容相仿，为防止篇幅过长这里只放两个")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 存档")]),t._v("\n            imagebutton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 声明是一个图片做的按钮")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 注意缩进（一个 Tab 或者四个空格）")]),t._v("\n                idle "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_save_base.png"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# idle 鼠标不在按钮上的样式")]),t._v("\n                hover "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_save_onMouse.png"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# hover 鼠标放在按钮上的样式")]),t._v("\n                selected_hover "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_save_onClick.png"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# selected_hover 鼠标点击时的样式")]),t._v("\n                hover_sound "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"voice/effect/マウス乗せ音.ogg"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# hover_sound 鼠标放在按钮上的音效")]),t._v("\n                activate_sound "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"voice/effect/メニュー決定音.ogg"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# activate_sound 鼠标点击时的音效")]),t._v("\n                action ShowMenu"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"game_save"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 执行的 action")]),t._v("\n\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 快进")]),t._v("\n            "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("## 快进和自动属于要保存状态的按钮，多一个 selected_idle 特性")]),t._v("\n            imagebutton"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(":")]),t._v("\n                idle "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_skip_base.png"')]),t._v("\n                hover "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_skip_onMouse.png"')]),t._v("\n                selected_hover "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_skip_onClick.png"')]),t._v("\n                selected_idle "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"gui/quick_menu/btn_skip_Clicked.png"')]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 快进是一个持续的状态（启用时一直高亮） selected_idle 表示点击后持续展示这个图标")]),t._v("\n                hover_sound "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"voice/effect/マウス乗せ音.ogg"')]),t._v("\n                activate_sound "),n("span",{pre:!0,attrs:{class:"token string"}},[t._v('"voice/effect/メニュー決定音.ogg"')]),t._v("\n                action Skip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" alternate Skip"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("fast"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(",")]),t._v(" confirm"),n("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),n("span",{pre:!0,attrs:{class:"token boolean"}},[t._v("True")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),n("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 照抄前面 textbutton 的 action")]),t._v("\n")])]),t._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[t._v("1")]),n("br"),n("span",{staticClass:"line-number"},[t._v("2")]),n("br"),n("span",{staticClass:"line-number"},[t._v("3")]),n("br"),n("span",{staticClass:"line-number"},[t._v("4")]),n("br"),n("span",{staticClass:"line-number"},[t._v("5")]),n("br"),n("span",{staticClass:"line-number"},[t._v("6")]),n("br"),n("span",{staticClass:"line-number"},[t._v("7")]),n("br"),n("span",{staticClass:"line-number"},[t._v("8")]),n("br"),n("span",{staticClass:"line-number"},[t._v("9")]),n("br"),n("span",{staticClass:"line-number"},[t._v("10")]),n("br"),n("span",{staticClass:"line-number"},[t._v("11")]),n("br"),n("span",{staticClass:"line-number"},[t._v("12")]),n("br"),n("span",{staticClass:"line-number"},[t._v("13")]),n("br"),n("span",{staticClass:"line-number"},[t._v("14")]),n("br"),n("span",{staticClass:"line-number"},[t._v("15")]),n("br"),n("span",{staticClass:"line-number"},[t._v("16")]),n("br"),n("span",{staticClass:"line-number"},[t._v("17")]),n("br"),n("span",{staticClass:"line-number"},[t._v("18")]),n("br"),n("span",{staticClass:"line-number"},[t._v("19")]),n("br"),n("span",{staticClass:"line-number"},[t._v("20")]),n("br"),n("span",{staticClass:"line-number"},[t._v("21")]),n("br"),n("span",{staticClass:"line-number"},[t._v("22")]),n("br"),n("span",{staticClass:"line-number"},[t._v("23")]),n("br")])]),n("p",[t._v("这样，我们就完成了 QuickMenu 的改造")])])}),[],!1,null,null,null);s.default=e.exports}}]);